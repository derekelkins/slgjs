<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>GitHub Example</title>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.min.js"></script>
</head>
<body>
<pre><code id="codeBox" class="js"></code></pre>
<div><ul id="result"></ul></div>
<script id="code" type="text/javascript">
requirejs(['../out/slg'], function(slg) {
fetch('https://api.github.com/repos/derekelkins/agda-vim/commits', {headers:{Accept: 'application/vnd.github.v3+json'}}).then(response => response.json().then(commitData => {
//fetch('https://api.github.com/repos/derekelkins/agda-vim/comments', {headers:{Accept: 'application/vnd.github.v3+json'}}).then(response => response.json().then(commentsData => {
const commits = new slg.EdbPredicate(commitData);
//const comments = new slg.EdbPredicate(commentsData);
const ul = document.getElementById('result');
slg.runQ(Q => slg.clause((SHA, Msg, CommentBody) => [
        commits.looseMatch({sha: SHA, commit: {message: Msg}}), 
        //comments.looseMatch({commit_id: SHA, body: CommentBody}),
        slg.unify(Q, {sha: SHA, message: Msg})]),
    result => {
        const li = document.createElement('li');
        li.innerText = JSON.stringify(result);
        ul.appendChild(li);
    });
}));// ));
});
</script>
<script type="text/javascript">
document.getElementById('codeBox').innerHTML = document.getElementById('code').innerText;
hljs.initHighlightingOnLoad();
</script>
</body>
</html>
