<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Example</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.20.1/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.20.1/vis.min.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.min.js"></script>
    <style type="text/css">
        .graphBox {
            width: 500px;
            height: 400px;
            margin-bottom: 2em;
        }
    </style>
</head>
<body>
<div id="edgeGraph" class="graphBox"></div>
Shake it loose:
<div id="pathGraph" class="graphBox"></div>
<script type="text/javascript">
requirejs(['../out/par'], function(par) {
const nodes = new vis.DataSet([
     {id: 1, label: '1'}
    ,{id: 2, label: '2'}
    ,{id: 3, label: '3'}
    //,{id: 4, label: '4'}
]);

const edge = new par.EdbPredicate([
    [1, 2],
    [2, 3],
    [3, 1]]);
    //[3, 4]]);
const path = new par.TabledPredicate(row => par.rule(
    () => [edge.match(row)],
    Y  => [path.match([row[0], Y]), edge.match([Y, row[1]])]));

const edgeEdges = par.toArrayQ(Q => par.clause((S, E) => [edge.match([S, E]), par.unify(Q, {from: S, to: E})]));
const pathEdges = par.toArrayQ(Q => par.clause((S, E) => [path.match([S, E]), par.unify(Q, {from: S, to: E})]));

const edgeData = {
    nodes: nodes,
    edges: new vis.DataSet(edgeEdges)
};
const pathData = {
    nodes: nodes,
    edges: new vis.DataSet(pathEdges)
};
const options = {edges: {arrows: 'to'}};
new vis.Network(document.getElementById('edgeGraph'), edgeData, options);
new vis.Network(document.getElementById('pathGraph'), pathData, options);
});
</script>
</body>
</html>
