<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>GitHub Example</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.min.js"></script>
</head>
<body>
<div><ul id="result"></ul></div>
<script type="text/javascript">
requirejs(['../out/par'], function(par) {
fetch('https://api.github.com/repos/derekelkins/agda-vim/commits', {headers:{Accept: 'application/vnd.github.v3+json'}}).then(response => response.json().then(commitData => {
//fetch('https://api.github.com/repos/derekelkins/agda-vim/comments', {headers:{Accept: 'application/vnd.github.v3+json'}}).then(response => response.json().then(commentsData => {
const commits = new par.EdbPredicate(commitData);
//const comments = new par.EdbPredicate(commentsData);
const ul = document.getElementById('result');
par.runQ(Q => par.clause(3, (SHA, Msg, CommentBody) => [
        commits.looseMatch({sha: SHA, commit: {message: Msg}}), 
        //comments.looseMatch({commit_id: SHA, body: CommentBody}),
        par.unify(Q, {sha: SHA, message: Msg})]),
    result => {
        const li = document.createElement('li');
        li.innerText = JSON.stringify(result);
        ul.appendChild(li);
    });
}));// ));
});
</script>
</body>
</html>
